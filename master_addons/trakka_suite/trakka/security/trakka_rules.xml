<odoo>
  <!-- Ops: full company scope -->
  <record id="rule_trakka_dispatch_ops" model="ir.rule">
    <field name="name">Dispatch: Ops see company</field>
    <field name="model_id" ref="model_trakka_dispatch_order"/>
    <field name="groups" eval="[(4, ref('trakka.group_trakka_ops'))]"/>
    <field name="domain_force">[('company_id','in', user.company_ids.ids)]</field>
  </record>

  <!-- Rider: only jobs assigned to their partner -->
  <record id="rule_trakka_dispatch_rider" model="ir.rule">
    <field name="name">Dispatch: Rider sees own</field>
    <field name="model_id" ref="model_trakka_dispatch_order"/>
    <field name="groups" eval="[(4, ref('trakka.group_trakka_rider'))]"/>
    <field name="domain_force">[('assigned_partner_id','=', user.partner_id.id)]</field>
  </record>
</odoo>
