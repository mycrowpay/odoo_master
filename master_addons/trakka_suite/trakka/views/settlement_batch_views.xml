<odoo>
  <record id="action_trakka_settlement_batch" model="ir.actions.act_window">
    <field name="name">Settlement Batches</field>
    <field name="res_model">trakka.settlement.batch</field>
    <field name="view_mode">tree,form</field>
  </record>
  <menuitem id="menu_trakka_settlement_batch" parent="menu_trakka_finops_root" action="action_trakka_settlement_batch" sequence="30"/>

  <record id="view_trakka_settlement_batch_tree" model="ir.ui.view">
    <field name="name">trakka.settlement.batch.tree</field>
    <field name="model">trakka.settlement.batch</field>
    <field name="arch" type="xml">
      <tree>
        <field name="name"/>
        <field name="company_id"/>
        <field name="state"/>
      </tree>
    </field>
  </record>

  <record id="view_trakka_settlement_batch_form" model="ir.ui.view">
    <field name="name">trakka.settlement.batch.form</field>
    <field name="model">trakka.settlement.batch</field>
    <field name="arch" type="xml">
      <form>
  <header>
    <button name="action_process"
            type="object"
            string="Process"
            class="oe_highlight"
            modifiers="{'invisible': [('state','!=','draft')]}"/>
    <field name="state" widget="statusbar"/>
  </header>

  <sheet>
    <group>
      <field name="name" readonly="1"/>
      <field name="company_id"
             modifiers="{'readonly': [('state','=','done')]}"/>
      <field name="escrow_ids"
             widget="many2many_tags"
             options="{'no_open': True}"
             modifiers="{'readonly': [('state','=','done')]}"/>
    </group>
  </sheet>
</form>

    </field>
  </record>
</odoo>
